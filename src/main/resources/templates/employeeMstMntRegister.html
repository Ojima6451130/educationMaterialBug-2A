<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">

<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="Thu, 01 Dec 1994 16:00:00 GMT">

<title>社員マスタメンテナンス（新規登録）</title>
<link rel="icon" type="image/png" href="/img/smashball.png">
<link th:href="@{/css/employeeMstMnt.css}" rel="stylesheet">

<!-- 共通CSS -->
<link rel="stylesheet" th:href="@{/css/common.css}">
<link rel="stylesheet" th:href="@{/css/employeeMstMnt.css}">
<link rel="stylesheet" th:href="@{/css/employeeMstMntRegister.css}">

<!-- 共通JS -->
<script th:src="@{/js/common.js}"></script>
<script th:src="@{/js/message.js}"></script>
<script th:src="@{/js/checkCommon.js}"></script>

<!-- ★ 既存の employeeMstMnt.js をそのまま使う -->
<script th:src="@{/js/employeeMstMnt.js}"></script>

</head>

<body>
<audio id="bgm" src="/sounds/sb_register.wav" loop></audio>
<audio id="challengerSound" preload="auto">
  <source src="/sounds/sb_challenger.mp3" type="audio/mpeg">
</audio>

<div class="game-frame">

  <!-- ===== ヘッダー ===== -->
  <header class="top-bar">
    <button type="button" class="top-btn back-btn"
      onclick="location.href='/kikin/employeeMstMnt'">戻る</button>

    <h1 class="title">A NEW EMPLOYEE ENTRY</h1>

    <button type="button" class="top-btn logout-btn"
      onclick="logout()">ログアウト</button>
  </header>

  <!-- ===== メイン ===== -->
  <div class="bottom-area">

    <!-- 左：キャラクタープレビュー -->
    <section class="employee-panel">

  <div class="challenger-panel">

    <!-- 背景：挑戦者が現れました -->
    <img
      src="/img/challenger.jpg"
      alt="challenger approaching"
      class="challenger-bg"
    >

    <!-- 次の社員キャラ（シルエット） -->
    <img
      th:src="@{'/img/employee/' + ${nextEmployeeNo} + '.png'}"
      alt="new challenger"
      class="challenger-silhouette"
      onerror="this.onerror=null; this.src='/img/employee/default.png';"
    >

  </div>

</section>


    <!-- 右：新規登録フォーム -->
    <section class="new-panel">

      <form id="registForm"
            name="registForm"
            action="/kikin/employeeMstMntRegister"
            method="post"
            class="register-form">

        <div class="form-row">
          <label>パスワード</label>
          <input type="password" name="password" maxlength="6">
        </div>

        <div class="form-row">
          <label>社員名</label>
          <input type="text" name="employeeName" maxlength="20">
        </div>

        <div class="form-row">
          <label>社員名カナ</label>
          <input type="text" name="employeeNameKana" maxlength="20">
        </div>

        <div class="form-row">
          <label>権限</label>
          <select name="authorityId">
            <option value="01">管理者</option>
            <option value="02">一般</option>
          </select>
        </div>

        <!-- ★ employeeMstMnt.js の関数をそのまま呼ぶ -->
        <button type="submit"
                class="btn-common new-btn"
                onclick="return employeeMstMntRegister()">
          参戦！！
        </button>

      </form>

    </section>

  </div>
</div>
<img id="fakeCursor" src="/img/1Pcursor.png">

<script>
window.addEventListener("load", () => {

  // 効果音
  const se = document.getElementById("challengerSound");
  // BGM
  const bgm = document.getElementById("bgm");

  if (se) {
    se.currentTime = 0;
    se.volume = 1.0;

    se.play().then(() => {
      // 効果音が鳴った後にBGM開始（スマブラ感）
      setTimeout(() => {
        if (bgm) {
          bgm.volume = 0.4;
          bgm.play().catch(()=>{});
        }
      }, 1500);
    }).catch(e => {
      console.log("SE 再生ブロック", e);
    });
  }
});
</script>





</body>
</html>
