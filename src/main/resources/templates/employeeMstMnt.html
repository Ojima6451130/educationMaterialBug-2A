<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>社員マスタメンテナンス</title>
<link rel="icon" type="image/png" href="/img/smashball.png">
<link th:href="@{/css/employeeMstMnt.css}" rel="stylesheet">
<link
	href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Noto+Sans+JP:wght@400;700;900&display=swap"
	rel="stylesheet">
</head>

<body>
<audio src="/sounds/sb_menu.wav" autoplay loop></audio>

	<form id="mntform" th:action="@{/kikin/employeeMstMnt/update}"
		method="post" th:object="${employeeMstMntForm}">

		<div class="game-frame">

			<!-- ===== ヘッダー ===== -->
			<header class="top-bar">
				<button type="button" class="top-btn back-btn"
					onclick="location.href='/kikin/menu'">戻る</button>

				<h1 class="title">EMPLOYEE MASTER MAINTENANCE</h1>

				<button type="button" class="top-btn logout-btn" onclick="logout()">ログアウト</button>

			</header>

			<!-- ===== 社員アイコン帯（3列×縦スクロール） ===== -->
			<section class="employee-select-area">
			<img id="readyBanner" src="/img/ready_to_fight.png" alt="READY TO FIGHT">
			
				<div class="employee-icons">

					<div th:each="emp, stat : *{employeeMstMntBeanList}"
						class="employee-icon" th:data-index="${stat.index}"
						th:data-employee-id="${emp.employeeId}">

						<img class="icon-img"
							th:src="@{'/img/employee/' + ${#strings.substring(emp.employeeId, 2)} + '.png'}"
							onerror="this.src='/img/employee/default.png'">
						<div class="icon-name" th:text="${emp.employeeName}"></div>
					</div>

				</div>
			</section>

			<!-- ===== 下段 ===== -->
			<div class="bottom-area">

				<!-- 左下：斜めカットパネル -->
				<section class="employee-panel">
					<div class="employee-panel-inner slide-panel" id="detailPanel">

						<!-- 左：キャラアイコン -->
						<div class="employee-character">
							<img id="detailIcon" th:src="@{/img/placeholder.png}">
						</div>

						<!-- 右：社員情報 -->
						<div class="employee-info">

							<h2 id="detailName">社員名</h2>

							<div th:each="emp, stat : *{employeeMstMntBeanList}"
								class="detail-form" th:id="'detail_' + ${stat.index}">

								<div class="form-row">
									<label>社員ID</label> <input type="text"
										th:value="${emp.employeeId}" readonly> <input
										type="hidden"
										th:field="*{employeeMstMntBeanList[__${stat.index}__].employeeId}">

									<label>パスワード</label> <input type="text" class="maskedPassword"
										th:field="*{employeeMstMntBeanList[__${stat.index}__].password}"
										maxlength="6">
								</div>
								<div class="form-row">
									<label>社員名</label> <input type="text"
										th:field="*{employeeMstMntBeanList[__${stat.index}__].employeeName}">
									<label>社員名カナ</label> <input type="text"
										th:field="*{employeeMstMntBeanList[__${stat.index}__].employeeNameKana}">
								</div>
								<div class="form-row">
									<label>権限</label> <select
										th:field="*{employeeMstMntBeanList[__${stat.index}__].AuthorityId}">
										<option value="01">管理者</option>
										<option value="02">一般</option>
									</select> <label class="delete-label"> <input type="checkbox"
										th:field="*{employeeMstMntBeanList[__${stat.index}__].deleteFlg}">
										削除
									</label>
									<button class="btn-common update-btn" type="button"
										onclick="employeeMstMntUpdate()">更新</button>
								</div>
							</div>

						</div>
					</div>
				</section>

				<!-- 右下 -->
				<section class="new-panel">
					<button type="button" class="btn-common new-btn"
						onclick="location.href='/kikin/employeeMstMnt/regist'">
						新規登録</button>
				</section>

			</div>

		</div>
	</form>

	<script th:src="@{/js/common.js}"></script>
	<script th:src="@{/js/checkCommon.js}"></script>
	<script th:src="@{/js/message.js}"></script>
	<script th:src="@{/js/employeeMstMnt.js}"></script>
	<img id="fakeCursor" src="/img/1Pcursor.png">
	

</body>
</html>
